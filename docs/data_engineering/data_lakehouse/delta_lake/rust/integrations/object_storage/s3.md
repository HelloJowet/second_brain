description: delta-rs, rust, S3 storage integration

# S3

```rust
use std::collections::HashMap;

#[tokio::main()]
async fn main() {
    // Register AWS S3 handlers for Delta Lake operations
    deltalake::aws::register_handlers(None);

    let mut storage_options = HashMap::new();
    storage_options.insert("AWS_ENDPOINT_URL".to_string(), "http://localhost:5561".to_string());
    storage_options.insert("AWS_REGION".to_string(), "us-east-1".to_string());
    storage_options.insert("AWS_ACCESS_KEY_ID".to_string(), "admin".to_string());
    storage_options.insert("AWS_SECRET_ACCESS_KEY".to_string(), "password".to_string());
    storage_options.insert("AWS_ALLOW_HTTP".to_string(), "true".to_string());
    storage_options.insert("AWS_S3_ALLOW_UNSAFE_RENAME".to_string(), "true".to_string());

    let table = deltalake::open_table_with_storage_options("s3://data-lakehouse/employee", storage_options)
        .await
        .expect("Load failed");
}
```

You can set the storage option parameters as environment variables too.

S3 requires a locking provider by default ([more information](https://delta-io.github.io/delta-rs/usage/writing/writing-to-s3-with-locking-provider/)). If you don't want to use a locking provider, you can disable it by setting the `AWS_S3_ALLOW_UNSAFE_RENAME` variable to `true`.
